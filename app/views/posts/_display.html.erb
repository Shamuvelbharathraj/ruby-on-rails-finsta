<table>
    <thead>
      <tr>
        <th>Post Name</th>
        <th>Post Description</th>
        <%if params[:topic_id].nil?%>
          <th>Topic Name</th>
        <%end%>
        <th>Author Name</th>
        <th>Avarage Rating</th>
        <th>Comments Count</th>
        <th colspan="3">Operations</th>
      </tr>
    </thead>
    <% @post.each do |post| %>
      <tr>
        <% unless post.users.where("id=#{current_user.id}").count>0%>
          
          <td><b><%= post.name %></b></td>
          <td><b><%= post.description %></b></td>
          <%if @topic.nil?%>
            <td><b><%= post.topic.name %></b></td>
          <%end%>
          <td><b><%= post.user.email %></b></td>

        <%else%>

          <td><%= post.name %></td>
          <td><%= post.description %></td>
          <%if @topic.nil?%>
            <td><%= post.topic.name %></td>
          <%end%>
          <td><%= post.user.email %></td>

        <%end%>


        <td style="text-align:center;"><%= post.ratings_average %> Stars </td>
        <td style="text-align:center;"><%= post.comments_count %> Comments </td>
        <td><%= link_to "Open", topic_post_path(post.topic_id,post) %></td>

        <% if can? :update, post%>
          <td><%= link_to "Edit", edit_topic_post_path(post.topic_id,post) %></td>
        <%end%>

        <% if can? :destroy, post%>
          <td><%= button_to "Delete", topic_post_path(post.topic_id,post) ,method: :delete %></td>
        <%end%>

      </tr>
    <% end %>
  </table>