
<p style="color: green"><%= notice %></p>

<h1>Posts</h1>

<div id="posts">
  <table>
    <thead>
      <tr>
        <th>Post Name</th>
        <th>Post Description</th>
        <%if @topic.nil?%>
          <th>Topic Name</th>
        <%end%>
        <th>Author Name</th>
        <th colspan="3">Operations</th>
      </tr>
    </thead>
    <% @post.each do |post| %>
      <tr>
        <td><%= post.name %></td>
        <td><%= post.description %></td>
        <%if @topic.nil?%>
          <td><%= post.topic.name %></td>
        <%end%>

        <td><%= User.find(post.user_id).email %></td>
        <td><%= link_to "Open", topic_post_path(post.topic_id,post) %></td>

        <% if can? :update, post%>
          <td><%= link_to "Edit", edit_topic_post_path(post.topic_id,post) %></td>
        <%end%>

        <% if can? :destroy, post%>
          <td><%= button_to "Delete", topic_post_path(post.topic_id,post) ,method: :delete %></td>
        <%end%>
      </tr>
    <% end %>
  </table>
</div>

<%unless @topic.nil?%>
  <%= link_to "New post", new_topic_post_path(@topic) %> |
  <%= link_to "Back", topic_path(@topic) %>
<%else%>
  <%= paginate @post%>
<%end%>